{"ast":null,"code":"import{useContext,useEffect}from\"react\";import PopupWithForm from\"../PopupWithForm/PopupWithForm\";import FormValidation from\"../../utils/FormValidation\";import CurrentUserContext from\"../../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isSend=_ref.isSend;var _FormValidation=FormValidation(),values=_FormValidation.values,errors=_FormValidation.errors,isValid=_FormValidation.isValid,isInputValid=_FormValidation.isInputValid,handleChange=_FormValidation.handleChange,reset=_FormValidation.reset,setValue=_FormValidation.setValue;var currentUser=useContext(CurrentUserContext);useEffect(function(){setValue('username',currentUser.name);setValue('description',currentUser.about);},[currentUser,setValue]);function resetAfterClose(){onClose();reset({username:currentUser.name,description:currentUser.about});}function handleSubmit(evt){evt.preventDefault();onUpdateUser({username:values.username,description:values.description},reset);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",isOpen:isOpen,onClose:resetAfterClose,isValid:isValid,isSend:isSend,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-label\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,minLength:2,maxLength:40,className:\"popup__input \".concat(isInputValid.username===undefined||isInputValid.username?'':'popup__input_type_error'),id:\"username\",name:\"username\",placeholder:\"\\u0418\\u043C\\u044F\",type:\"text\",value:values.username?values.username:'',onChange:handleChange,disabled:isSend}),/*#__PURE__*/_jsx(\"span\",{id:\"username-error\",className:\"popup__error popup__error_visible\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-label\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,minLength:2,maxLength:200,className:\"popup__input \".concat(isInputValid.description===undefined||isInputValid.description?'':'popup__input_type_error'),name:\"description\",id:\"description\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",type:\"text\",value:values.description?values.description:'',onChange:handleChange,disabled:isSend}),/*#__PURE__*/_jsx(\"span\",{id:\"description-error\",className:\"popup__error popup__error_visible\",children:errors.description})]})]});}","map":{"version":3,"names":["useContext","useEffect","PopupWithForm","FormValidation","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","isOpen","onClose","onUpdateUser","isSend","_FormValidation","values","errors","isValid","isInputValid","handleChange","reset","setValue","currentUser","name","about","resetAfterClose","username","description","handleSubmit","evt","preventDefault","title","onSubmit","children","className","required","minLength","maxLength","concat","undefined","id","placeholder","type","value","onChange","disabled"],"sources":["/Users/alexey/Desktop/dev/react-mesto-auth/src/components/EditProfilePopup/EditProfilePopup.js"],"sourcesContent":["import { useContext, useEffect } from \"react\";\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm\"\nimport FormValidation from \"../../utils/FormValidation\"\nimport CurrentUserContext from \"../../contexts/CurrentUserContext\";\n\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser, isSend }) {\n  const { values, errors, isValid, isInputValid, handleChange, reset, setValue } = FormValidation();\n\n  const currentUser = useContext(CurrentUserContext)\n\n  useEffect(() => {\n    setValue('username', currentUser.name);\n    setValue('description', currentUser.about);\n  }, [currentUser, setValue]);\n\n  function resetAfterClose() {\n    onClose();\n    reset({ username: currentUser.name, description: currentUser.about });\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onUpdateUser({ username: values.username, description: values.description }, reset);\n  }\n\n  return (\n    <PopupWithForm\n      name='profile'\n      title='Редактировать профиль'\n      isOpen={isOpen}\n      onClose={resetAfterClose}\n      isValid={isValid}\n      isSend={isSend}\n      onSubmit={handleSubmit}\n    >\n      <label className=\"popup__input-label\">\n        <input\n          required\n          minLength={2}\n          maxLength={40}\n          className={`popup__input ${isInputValid.username === undefined || isInputValid.username ? '' : 'popup__input_type_error'}`}\n          id=\"username\"\n          name=\"username\"\n          placeholder=\"Имя\"\n          type=\"text\"\n          value={values.username ? values.username : ''}\n          onChange={handleChange}\n          disabled={isSend}\n        />\n        <span id=\"username-error\" className=\"popup__error popup__error_visible\">{errors.username}</span>\n      </label>\n      <label className=\"popup__input-label\">\n        <input\n          required\n          minLength={2}\n          maxLength={200}\n          className={`popup__input ${isInputValid.description === undefined || isInputValid.description ? '' : 'popup__input_type_error'}`}\n          name=\"description\"\n          id=\"description\"\n          placeholder=\"О себе\"\n          type=\"text\"\n          value={values.description ? values.description : ''}\n          onChange={handleChange}\n          disabled={isSend}\n        />\n        <span id=\"description-error\" className=\"popup__error popup__error_visible\">{errors.description}</span>\n      </label>\n    </PopupWithForm>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}